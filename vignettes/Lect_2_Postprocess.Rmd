---
title: 'Lect 2: How to Postprocess a TopoSUB sim'
author: "Johannes Brenner"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Lect 3 Visualisation}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### is TopoSUB R-packages installed and can be loaded?

Before starting make sure that the [TopoSUB R-package](https://github.com/JBrenn/TopoSUB) is installed and can be loaded:

```{r libraries, eval=FALSE}

if(!require(TopoSUB))
{
  if(!require("devtools"))
  {
    install.packages(devtools)
    require("devtools")
  }
  install_github("TopoSUB", "JBrenn")
  require("TopoSUB")
}

```

## Main functions

The main functions for TopoSUB postprocessing are

1. TopoSUB_read is reading the TopoSUB simulation output data in a data.table, it is utilising the R-function data.table::fread for faster and more convenient reading of text files, for simulations run in parallel mode parallel reading of data is implemented. Some postprocessing is done on variable:

* calculation of total precipitation (Ptotal_mm_) from rain and snow components
* calculation of evapotranspiration (Evaptranspiration_mm_) from transpiration and evaporation
* calculation of latent and sensible heat over the canopy (LE_over_canopy_W_m2_, H_over_canopy_W_m2_)
* identification of snow cover days (SnowCover_days_) defined by the threshold argument _SnowCoverThres_
* calculation of total soil water content by adding liquid and ice soil water content for each soil layer (e.g. SWC_total_200 in 20cm soil depth)



2. TopoSUB_remap


### Requirements

* current installation of R (>3.0.0)
* [gdal](http://www.gdal.org/) and [proj4](https://github.com/OSGeo/proj.4) installed
